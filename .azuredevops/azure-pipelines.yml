name: $(Rev:r)

trigger: none
pr: none

parameters:
  - name: cluster
    displayName: 
    type: string
    values:
     - mazcacitprdacloudbeesaks01

variables:
  - group: cex_jenkins_api
  - group: aks_service_principals
  # remove once fully on ADO and reference is removed from the cluster-connect.sh scripts
  - name: STAGE_NAME
    value: task

extends:
  template: ../cluster-pipeline.yml
  parameters:
    name: run_maven
    displayName: Run Maven
    cluster: ${{ parameters.cluster }}
    script: |
      export RENOVATE_CONFIG_FILE="./.azuredevops/renovate/config.js"
      git config --global user.email 'bot@renovateapp.com'
      git config --global user.name 'Renovate Bot'
      yum install -y mvn
      mvn -B -DskipTests clean package
      